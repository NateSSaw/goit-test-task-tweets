"use strict";(self.webpackChunkgoit_test_task_tweets=self.webpackChunkgoit_test_task_tweets||[]).push([[492],{492:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n(433),r=n(439),c=n(791);var i={getTweets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="https://6456da1e5f9a4f23614d2d7b.mockapi.io/tweets",n="limit=4";return fetch("".concat(t,"?page=").concat(e,"&").concat(n)).then((function(e){return e.ok?e.json():Promise.reject(new Error("No response from server"))}))}},o=i;var a=n.p+"static/media/logo.fd4ef749d37f796c02d5c218abefbc99.svg",l=n(765),u=n(184),d=function(e){var t=e.tweets,n=(0,c.useState)(!1),s=(0,r.Z)(n,2),i=s[0],o=s[1],d=(0,c.useState)("Follow"),f=(0,r.Z)(d,2),h=f[0],g=f[1],j=(0,c.useState)(0),p=(0,r.Z)(j,2),m=p[0],w=p[1],x=function(e){!1===i?(o(!0),e.target.style.backgroundColor="#5CD3A8",g("Followed"),w(1)):(o(!1),e.target.style.backgroundColor="#EBD8FF",g("Follow"),w(0))};return t.map((function(e){var t=e.id,n=e.user,s=e.tweets,r=e.followers,c=e.avatar,i=r+m;return(0,u.jsxs)("li",{className:"card",children:[(0,u.jsx)("img",{src:a,alt:"logo"}),(0,u.jsx)("img",{src:l,alt:"messages"}),(0,u.jsx)("img",{className:"ImageGalleryItem-image",src:c,alt:n}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{children:s}),(0,u.jsx)("span",{children:"TWEETS"})]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{children:i}),(0,u.jsx)("span",{children:"FOLLOWERS"})]}),(0,u.jsx)("button",{isfollowed:"false",onClick:x,children:h})]},t)}))},f=function(e){var t=e.onClick;return(0,u.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})};function h(){var e=(0,c.useState)([]),t=(0,r.Z)(e,2),n=t[0],i=t[1],a=(0,c.useState)(1),l=(0,r.Z)(a,2),h=l[0],g=l[1],j=(0,c.useState)("idle"),p=(0,r.Z)(j,2),m=p[0],w=p[1],x=(0,c.useState)(null),v=(0,r.Z)(x,2),k=v[0],b=v[1];(0,c.useEffect)((function(){g(1),w("pending"),o.getTweets().then((function(e){if(!(e.length>0))return Promise.reject(new Error("Didn't find tweets"));i(e),g((function(e){return e+1})),w("resolved")})).catch((function(e){var t=e.message;b(t),w("rejected")}))}),[]);return"pending"===m?(0,u.jsx)("p",{children:" Loadind..."}):"rejected"===m?(0,u.jsxs)("div",{className:"Error",children:[(0,u.jsx)("h2",{className:"title",children:k}),(0,u.jsx)("img",{src:"https://www.2dsl.ru/wp-content/uploads/kak-ispravit-oshibku-404not-found-469152c.jpg",alt:"error 404",width:"1000",height:"1000"}),";"]}):"resolved"===m?(0,u.jsxs)("div",{children:[(0,u.jsx)("ul",{children:(0,u.jsx)(d,{tweets:n})}),(0,u.jsx)(f,{onClick:function(){o.getTweets(h).then((function(e){if(!(e.length>0))return Promise.reject(new Error("Didn't find more tweets"));i((function(t){return[].concat((0,s.Z)(t),(0,s.Z)(e))})),g((function(e){return e+1}))})).catch((function(e){var t=e.message;b(t),w("rejected")}))}})]}):void 0}function g(){return(0,u.jsx)("div",{children:(0,u.jsx)(h,{})})}},765:function(e,t,n){e.exports=n.p+"static/media/picture.92ac7be459c2a240dbba.png"}}]);
//# sourceMappingURL=492.47ff8a14.chunk.js.map